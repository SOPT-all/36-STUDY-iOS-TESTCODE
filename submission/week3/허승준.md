## 1. ì˜ì¡´ì„± ì£¼ì…(DI: Dependency Injection)

### 1) 'ì˜ì¡´ì„±'ì´ë€ ë¬´ì—‡ì¼ê¹Œ?

âœ… **í•œ ê°ì²´ê°€ ë‹¤ë¥¸ ê°ì²´ì— ì˜ì¡´í•˜ëŠ” ê²ƒ**

ğŸˆ**ì˜ˆì‹œ ì½”ë“œ**
```
class Engine {
    func start() {
        print("ì—”ì§„ì„ ê°€ë™í•©ë‹ˆë‹¤")
    }
}

class Car {
    let engine = Engine()

    func move() {
        engine.start()
        print("ì°¨ê°€ ì¶œë°œí•©ë‹ˆë‹¤")
    }
}
```

ğŸˆ**ìœ„ ì½”ë“œì˜ ë¬¸ì œì ì€ ë¬´ì—‡ì¼ê¹Œìš”?**

- ë§Œì•½ ì—”ì§„ì´ ì•„ë‹ˆë¼ ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œ ì‹œë™ì„ ê±°ëŠ” ìë™ì°¨ë¼ë©´? -> Car í´ë˜ìŠ¤ë¥¼ ê³ ì³ì•¼ í•¨

<br>

### 2) 'ì˜ì¡´ì„± ì£¼ì…'ì´ë€ ë¬´ì—‡ì¼ê¹Œ?

âœ… ê°ì²´ ë‚´ì—ì„œ ì™¸ë¶€ ê°ì²´ë¥¼ ìƒì„±í•˜ì§€ ì•ŠìŒ

âœ… ì™¸ë¶€ì—ì„œ ìƒì„±í•œ ê°ì²´ë¥¼ ì£¼ì…í•˜ëŠ” ê²ƒ

ğŸˆ**í”„ë¡œí¼í‹° ì£¼ì…**
```
class Engine {
    func start() {
        print("ì—”ì§„ì„ ê°€ë™í•©ë‹ˆë‹¤")
    }
}

class Car {
    var engine: Engine?

    func move() {
        engine?.start()
        print("ì°¨ê°€ ì¶œë°œí•©ë‹ˆë‹¤")
    }
}

let car = Car()
let newEngine = Engine()

car.engine = newEngine
car.move()
```

ğŸˆ**ë©”ì„œë“œ ì£¼ì…**
```
class Engine {
    func start() {
        print("ì—”ì§„ì„ ê°€ë™í•©ë‹ˆë‹¤")
    }
}

class Car {
    func move(engine: Engine) {
        engine.start()
        print("ì°¨ê°€ ì¶œë°œí•©ë‹ˆë‹¤")
    }
}

let car = Car()
let newEngine = Engine()

car.move(newEngine)
```

ğŸˆ**í”„ë¡œí¼í‹° ì£¼ì… & ë©”ì„œë“œ ì£¼ì…ì˜ ë¬¸ì œì **

- ì˜ì¡´í•˜ëŠ” ê°ì²´ê°€ ë¨¼ì € ìƒì„±ë˜ì§€ ì•Šì€ ê²½ìš°ì—ëŠ” ì´ìš©í•  ìˆ˜ ì—†ìŒ

ğŸˆ**ìƒì„±ì ì£¼ì…**
```
class Engine {
    func start() {
        print("ì—”ì§„ì„ ê°€ë™í•©ë‹ˆë‹¤")
    }
}

class Car {
    private let engine: Engine

    init(engine: Engine) {
        self.engine = engine
    }
    
    func move() {
        engine.start()
        print("ì°¨ê°€ ì¶œë°œí•©ë‹ˆë‹¤")
    }
}

let newEngine = Engine()
let car = Car(engine: newEngine)

car.move()
```

ğŸˆ**ì¸í„°í˜ì´ìŠ¤ ì£¼ì…**
```
protocol EngineProtocol {
    func start()
}

class Gasoline: EngineProtocol {
    func start() {
        print("ê°€ì†”ë¦° ì—”ì§„ ê°€ë™")
    }
}

class ElectricMotor: EngineProtocol {
    func start() {
        print("ì „ê¸° ëª¨í„° ê°€ë™")
    }
}

class Car {
    private let engine: EngineProtocol

    init(engine: EngineProtocol) {
        self.engine = engine
    }
    
    func move() {
        engine.start()
        print("ì°¨ê°€ ì¶œë°œí•©ë‹ˆë‹¤")
    }
}

let gasoline = Gasoline()
let electric = ElectricMotor()

let car1 = Car(engine: gasoline)
let car2 = Car(engine: electric)

car1.move()
car2.move()
```

---
## 2. í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•œ ì½”ë“œ êµ¬ì¡°

### 1) í…ŒìŠ¤íŠ¸í•˜ê¸° ì–´ë ¤ìš´ ì½”ë“œë€ ë¬´ì—‡ì¼ê¹Œ?

âœ… **í…ŒìŠ¤íŠ¸ ì‹œë§ˆë‹¤ ê²°ê³¼ê°€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆëŠ” ê²½ìš°**

ğŸˆ**ì˜ˆì‹œ ì½”ë“œ (ì˜ëª»ëœ ì˜ˆì‹œ)**
```
class CarRacing {
    // ëœë¤ ê°’ì´ 4ì´ìƒì´ë©´ ìë™ì°¨ê°€ ì „ì§„í•œë‹¤ê³  ê°€ì •
    func isPossibleMove() -> Bool {
        let move = Int.random(in: 1...10)
        if move >= 4 {
            return true
        }
        return false
    }
}

import XCTest
@testable import Heoseungjun

final class CarRacingTest: XCTestCase {
    func testIsPossibleMove() -> Bool {
        let carRacing = CarRacing()
        let result = carRacing.isPossibleMove()
        XCTAssertTrue(result)
    }
}
```

ğŸˆ**ì˜ˆì‹œ ì½”ë“œ (ì˜¬ë°”ë¥¸ ì˜ˆì‹œ : ë™ì‘ ë¶„ë¦¬)**
```
class CarRacing {
    func isPossibleMove(move: Int) -> Bool {
        if move >= 4 {
            return true
        }
        return false
    }
}

import XCTest
@testable import Heoseungjun

final class CarRacingTest: XCTestCase {
    func testIsPossibleMove() -> Bool {
        let carRacing = CarRacing()
        let result = carRacing.isPossibleMove(4)
        XCTAssertTrue(result)
    }
}
```

<br>

âœ… **ì „ì—­ ìƒíƒœë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°**

ğŸˆ **ì „ì—­ ìƒíƒœ ì‚¬ìš©**

- í…ŒìŠ¤íŠ¸ ê°„ ìƒíƒœê°€ ê³µìœ ë˜ë¯€ë¡œ 'í…ŒìŠ¤íŠ¸ ë…ë¦½ì„±'ì„ ë³´ì¥í•  ìˆ˜ ì—†ë‹¤
- ë³‘ë ¬ í…ŒìŠ¤íŠ¸ ì‹œ ì˜ˆê¸°ì¹˜ ëª»í•œ ì˜¤ë¥˜ ë°œìƒ ê°€ëŠ¥ì„±


```
var currentUserName = "Guest"  // ì „ì—­ ë³€ìˆ˜

class Greeting {
    func sayHello() -> String {
        return "Hello, \(currentUserName)"
    }
}
```

ğŸˆ **ì´ë ‡ê²Œ ê³ ì³ë³´ì**

```
class Greeting {
    private let userName: String

    init(userName: String) {
        self.userName = userName
    }

    func sayHello() -> String {
        return "Hello, \(userName)"
    }
}
```

<br>

âœ… **ë·°ì™€ ë¡œì§ì´ ê²°í•©ëœ ê²½ìš°**

ğŸˆ **ë·°ì™€ ë¡œì§ì˜ ê²°í•©**

- ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ë¶ˆê°€ -> UI í…ŒìŠ¤íŠ¸ë¥¼ ê¼­ í•¨ê»˜ ì§„í–‰í•´ì•¼ í•¨

```
class ViewController: UIViewController {
    @IBOutlet weak var label: UILabel!

    override func viewDidLoad() {
        super.viewDidLoad()
        let result = getResult()
        label.text = result
    }

    func getResult() -> String {
        return "ê²°ê³¼"
    }
}
```

ğŸˆ **ì´ë ‡ê²Œ ê³ ì³ë³´ì**

- ViewModel ë„ì…
```
class ViewModel {
    func getResult() -> String {
        return "ê²°ê³¼"
    }
}

class ViewController: UIViewController {
    @IBOutlet weak var label: UILabel!
    private let viewModel = ViewModel()

    override func viewDidLoad() {
        super.viewDidLoad()
        label.text = viewModel.getResult()
    }
}
```


<br><br>

### 3) í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•œ ì½”ë“œ êµ¬ì¡°ì˜ í•µì‹¬ ì›ì¹™

âœ… **ë‹¨ì¼ ì±…ì„ ì›ì¹™**

ğŸˆê°ì²´ëŠ” **ë‹¨ í•˜ë‚˜ì˜ ì±…ì„**ë§Œ ê°€ì ¸ì•¼ í•œë‹¤<br>
ğŸˆí‰ê°€ ì²™ë„ : ê¸°ëŠ¥ ìˆ˜ì • ì‹œ íŒŒê¸‰ íš¨ê³¼<br>
ğŸˆì¦‰, ë‹¨ì¼ ì±…ì„ ì›ì¹™ì€ ëª¨ë“ˆì´ ë³€ê²½ë˜ëŠ” ì´ìœ ê°€ 1ê°€ì§€ì—¬ì•¼ í•œë‹¤ëŠ” ê²ƒ!

- ì°¸ê³ ìë£Œ : https://inpa.tistory.com/entry/OOP-ğŸ’ -ì•„ì£¼-ì‰½ê²Œ-ì´í•´í•˜ëŠ”-SRP-ë‹¨ì¼-ì±…ì„-ì›ì¹™#

<br>

âœ… **SOLID ì›ì¹™**

ğŸˆ**S : ë‹¨ì¼ ì±…ì„ ì›ì¹™**
  - ì´ë¯¸ ë‹¤ë£¨ì—ˆì£ ?

ğŸˆ**O : ê°œë°©-íì‡„ ì›ì¹™**
  - ì†Œí”„íŠ¸ì›¨ì–´ ê°œì²´ëŠ” í™•ì¥ì—ëŠ” ì—´ë ¤ìˆì–´ì•¼ í•˜ê³ , ë³€ê²½ì—ëŠ” ë‹«í˜€ìˆì–´ì•¼ í•œë‹¤
  - ê°œë°©-íì‡„ ì›ì¹™ ìœ„ë°˜ ì‚¬ë¡€ 
    ```
    enum ê²Œì„ {
        case ìŠ¤í¬ì¸ ê²Œì„
        case FPSê²Œì„
    }

    class Flag {
        let ê²Œì„ìœ í˜•: ê²Œì„
    
        init(ê²Œì„ìœ í˜•: ê²Œì„) {
            self.ê²Œì„ìœ í˜• = ê²Œì„ìœ í˜•
        }
    }

    func printNameOfê²Œì„(flag: Flag) {
        switch flag.ê²Œì„ìœ í˜• {
            case .ìŠ¤í¬ì¸ ê²Œì„:
                print("FIFA")
            case .FPSê²Œì„:
                print("ì„œë“ ì–´íƒ")
        }
    }
    ```

  - ì´ë ‡ê²Œ ë°”ê¿”ë³´ì
    ```
    protocol ê²Œì„ {
        var name: String { get }
    }

    struct ìŠ¤í¬ì¸ ê²Œì„: ê²Œì„ {
        let name = "FIFA ì˜¨ë¼ì¸"
    }

    class Flag {
        let ê²Œì„ìœ í˜•: ê²Œì„
        
        init(ê²Œì„ìœ í˜•: ê²Œì„) {
            self.ê²Œì„ìœ í˜• = ê²Œì„ìœ í˜•
        }
    }
    
    func printNameOfê²Œì„(flag: Flag) {
        print(flag.ê²Œì„ìœ í˜•.name)
    }
    ```

ğŸˆ**L : ë¦¬ìŠ¤ì½”í”„ ì¹˜í™˜ ì›ì¹™**
  - í”„ë¡œê·¸ë¨ì˜ ê°ì²´ëŠ” í”„ë¡œê·¸ë¨ ì •í™•ì„±ì„ ê¹¨ëœ¨ë¦¬ì§€ ì•Šìœ¼ë©´ì„œ í•˜ìœ„ íƒ€ì…ì˜ ì¸ìŠ¤í„´ìŠ¤ë¡œ ë°”ê¿€ ìˆ˜ ìˆì–´ì•¼ í•œë‹¤
  - ìì‹ í´ë˜ìŠ¤ëŠ” ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ë™ì‘ì„ ë°”ê¾¸ì§€ ì•ŠëŠ”ë‹¤

ğŸˆ**I : ì¸í„°í˜ì´ìŠ¤ ë¶„ë¦¬ ì›ì¹™**
  - í´ë¼ì´ì–¸íŠ¸ê°€ ìì‹ ì´ ì´ìš©í•˜ì§€ ì•ŠëŠ” ë©”ì„œë“œì— ì˜ì¡´í•˜ì§€ ë§ì•„ì•¼ í•œë‹¤
  - í´ë˜ìŠ¤ ë‚´ì—ì„œ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì¸í„°í˜ì´ìŠ¤ëŠ” êµ¬í˜„í•˜ì§€ ì•ŠëŠ”ë‹¤
  - ì˜ˆì‹œ ì½”ë“œ
    ```
    protocol TapGestureProtocol {
        func íƒ­()
    }

    protocol LongTapGestureProtocol {
        func ê¾¸ìš±ëˆ„ë¥´ê¸°()
    }

    protocol DoubleTapGestureProtocol {
        func ë”ë¸”íƒ­()
    }
    
    class GestureBtn: TapGestureProtocol, LongTapGestureProtocol, DoubleTapGestureProtocol {
        func íƒ­() {}
        func ê¾¸ìš±ëˆ„ë¥´ê¸°() {}
        func ë”ë¸”íƒ­() {}
    }
    
    class DoubleTapBtn: DoubleTapGestureProtocol {
        func ë”ë¸”íƒ­() {}
    }
    
    class LongAndTapBtn: LongTapGestureProtocol, TapGestureProtocol {
        func íƒ­() {}
        func ê¾¸ìš±ëˆ„ë¥´ê¸°() {}
    }
    ```


ğŸˆ**D : ì˜ì¡´ ì—­ì „ ì›ì¹™**
  - ìƒìœ„ ëª¨ë“ˆì€ í•˜ìœ„ ëª¨ë“ˆì— ì˜ì¡´í•´ì„œëŠ” ì•ˆ ëœë‹¤
  - ìƒìœ„ ëª¨ë“ˆê³¼ í•˜ìœ„ ëª¨ë“ˆ ëª¨ë‘ ì¶”ìƒí™”ëœ ì¸í„°í˜ì´ìŠ¤(í”„ë¡œí† ì½œ)ì— ì˜ì¡´í•´ì•¼ í•œë‹¤

    ![img](https://github.com/user-attachments/assets/a5174ddc-ad1e-46b7-8d6a-0e6a880c69d4)

  - ì˜ˆì‹œ ì½”ë“œëŠ” ì–´ë”¨ì„ê¹Œìš”?

---
## 3. í…ŒìŠ¤íŠ¸ ë”ë¸” (Mocks, Stubs)

### 1) í…ŒìŠ¤íŠ¸ ë”ë¸”ì´ë€?

âœ… **ì‹¤ì œ ê°ì²´ë¥¼ ëŒ€ì‹ í•˜ì—¬ í…ŒìŠ¤íŠ¸ë¥¼ ì‰½ê²Œ ë„ì™€ì£¼ëŠ” ê°ì²´**

| ìš©ì–´    | ì—­í•  ì„¤ëª…                         |
| ----- | ----------------------------- |
| Dummy | ì¸ì ì±„ìš°ê¸°ìš©, ì‚¬ìš©ë˜ì§€ ì•ŠìŒ              |
| Stub  | ê³ ì •ëœ ê°’ì„ ë°˜í™˜                     |
| Spy   | í˜¸ì¶œ ì—¬ë¶€/íšŸìˆ˜/ìˆœì„œ ì¶”ì                 |
| Mock  | ê¸°ëŒ€í•œ ëŒ€ë¡œ ë™ì‘í–ˆëŠ”ì§€ ê²€ì¦ (í–‰ìœ„ ê¸°ë°˜)       |
| Fake  | ì‹¤ì œ êµ¬í˜„ì´ì§€ë§Œ ë‹¨ìˆœí•œ ë¡œì§ (ex. ì¸ë©”ëª¨ë¦¬ DB) |

### 2) Stub vs Mock

| í•­ëª©    | Stub                   | Mock                         |
| ----- | ---------------------- | ---------------------------- |
| ëª©ì     | í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ê³ ì • ì‘ë‹µ ì œê³µ       | ë©”ì„œë“œê°€ í˜¸ì¶œë˜ì—ˆëŠ”ì§€ í™•ì¸               |
| ê²€ì¦ ë°©ì‹ | ê²°ê³¼ê°’ ê¸°ë°˜ (state-based)   | í˜¸ì¶œ ì—¬ë¶€ ê¸°ë°˜ (interaction-based) |
| ì˜ˆì‹œ    | "A í•¨ìˆ˜ê°€ í•­ìƒ 3ì„ ë°˜í™˜í•˜ë„ë¡ ì„¤ì •" | "B í•¨ìˆ˜ê°€ ë°˜ë“œì‹œ í˜¸ì¶œë˜ì—ˆëŠ”ì§€ ê²€ì¦"        |

âœ… **ìƒí™© ê°€ì •**

```
protocol APIClient {
    func fetchUserName() -> String
}

class UserService {
    private let apiClient: APIClient
    
    init(apiClient: APIClient) {
        self.apiClient = apiClient
    }
    
    func getGreetingMessage() -> String {
        let name = apiClient.fetchUserName()
        return "Hello, \(name)!"
    }
}
```

âœ… **Stub : ê³ ì • ì‘ë‹µ ì œê³µ**

```
class StubAPIClient: APIClient {
    func fetchUserName() -> String {
        return "Alice" // í•­ìƒ ê°™ì€ ì´ë¦„ ë°˜í™˜
    }
}


import XCTest

class UserServiceTests_WithStub: XCTestCase {
    func test_getGreetingMessage_returnsGreetingWithStubName() {
        let stubClient = StubAPIClient()
        let service = UserService(apiClient: stubClient)

        let result = service.getGreetingMessage()

        XCTAssertEqual(result, "Hello, Alice!")
    }
}
```

âœ… **Mock : ë©”ì„œë“œ í˜¸ì¶œ ì—¬ë¶€ í™•ì¸**

```
class MockAPIClient: APIClient {
    private(set) var isFetchCalled = false
    
    func fetchUserName() -> String {
        isFetchCalled = true
        return "Bob"
    }
}

class UserServiceTests_WithMock: XCTestCase {
    func test_getGreetingMessage_callsFetchUserName() {
        let mockClient = MockAPIClient()
        let service = UserService(apiClient: mockClient)

        _ = service.getGreetingMessage()

        XCTAssertTrue(mockClient.isFetchCalled)
    }
}
```

### 3) ì ìš© ì‚¬ë¡€

- ë„¤íŠ¸ì›Œí¬ í†µì‹ ì²˜ëŸ¼ ì‹œê°„ì´ ì˜¤ë˜ê±¸ë¦¬ëŠ” ë™ì‘ì— ëŒ€í•´, ì‹¤ì œ API ì—†ì´ ë¹ ë¥¸ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
